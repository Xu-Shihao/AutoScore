# AutoScore Note

github: https://github.com/Xu-Shihao/AutoScore

## version 0.1.4

### 大纲
这个版本实现了：

1. 当前数学试卷卷面的分割数据生成
2. 试卷卷面分割yolo模型进行了微调

### 结果预览

1. 试卷卷面分割

    基于OCRAutoScore的Finetuned YOLOv8，对答题区域进行分割。
    注：因为试卷版面不一致，对识别区域进行了指定区域的过滤，如果某一个区域包含多个分割区域，按照置信度选择最大的。
    注：仍存在分割错误的情况，需要在使用的数据集上标注和finetune以达到更好的效果。

    ![image](g2dh229_01081311_01A\segmentation\paper_segmentation.jpg)

    **错误情况**：

    - 带有标题

    ![image](g2dh229_01081311_01A\segmentation\objective_problem_1_g2dh229_01081311_01A.jpg)

    - 分割不完全

    ![image](g2dh229_01081311_01A\image.jpg)

2. 选择题作答区域分割

    识别横线，分割区域，去掉横线（增强OCR结果）

    example：

    ![image](g2dh229_01081311_01A\cloze_segmentation\subjective_problem_3_g2dh229_01081311_01A-1.jpg)
    ![image](g2dh229_01081311_01A\cloze_segmentation\subjective_problem_3_g2dh229_01081311_01A-2.jpg)
    ![image](g2dh229_01081311_01A\cloze_segmentation\subjective_problem_3_g2dh229_01081311_01A-3.jpg)
    ![image](g2dh229_01081311_01A\cloze_segmentation\subjective_problem_3_g2dh229_01081311_01A-4.jpg)

3. 基于GPT4o和claude Sonnet 3.5的OCR和正确判断

    GPT4o和claude Sonnet 3.5效果相当， F1-score = 86%。
    
    GPT4o结果在 ```output\results_GPT4_100.xlsx```

    ```
    [2024-07-24 12:01:29,066] [    INFO] main_LLM.py:67 - Precision: 0.8843
    [2024-07-24 12:01:29,066] [    INFO] main_LLM.py:68 - Recall: 0.9224
    [2024-07-24 12:01:29,066] [    INFO] main_LLM.py:69 - F1 Score: 0.9030
    ```

    claude Sonnet 3.5结果在 ```output\results_sonnet3.5_100.xlsx```
    
    ```
    [2024-07-24 11:59:34,128] [    INFO] main_LLM.py:67 - Precision: 0.8571
    [2024-07-24 11:59:34,128] [    INFO] main_LLM.py:68 - Recall: 0.9600
    [2024-07-24 11:59:34,128] [    INFO] main_LLM.py:69 - F1 Score: 0.9057
    ```

4. OCR + LLM result

    OCR first + GPT4 checking 结果在 ```output\results_ocr_gpt4_100.xlsx```

    ```
    [2024-07-24 12:02:53,324] [    INFO] main_LLM.py:67 - Precision: 0.8889
    [2024-07-24 12:02:53,324] [    INFO] main_LLM.py:68 - Recall: 0.7458
    [2024-07-24 12:02:53,324] [    INFO] main_LLM.py:69 - F1 Score: 0.8111
    ```
